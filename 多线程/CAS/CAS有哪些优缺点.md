
### CAS有哪些优缺点?

一、优点
1. 可以保证变量操作的原子性；
2. 并发量不是很高的情况下，使用CAS机制比使用锁机制效率更高；


二、缺点
1. ABA问题
> CAS更新数据时,会先检查数据是否被其他线程修改过,将工作内存中副本值与主内存中的变量值比较,但如果主内存中的值是从A改到B再改到A,则并不知道主内存中的值被修改过.
2. 可能会消耗较高的CPU
> - 因为乐观锁是认为更新数据时,很少有其他线程来抢夺资源;
> - 如果此时有很多其他线程抢夺资源的花,CAS检查数据时总是要不断重试,反而会消耗较高的CPU;
> - 因此,并发量高的情况下,使用锁可能更好. 或者使用AtomicLong的替代类：LongAdder。
3. 不能保证代码块的原子性
> - JAVA中的CAS机制只能保证“比较和更新”共享变量这部分的原子性,  
> - 而synchronied可以保证整个代码块的原子性;










> 参考: 
> https://www.cnblogs.com/54chensongxia/p/12160085.html
> https://www.zhihu.com/question/39130725























