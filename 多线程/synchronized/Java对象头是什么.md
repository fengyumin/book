Java对象头是什么.md


### Java对象头是什么?

JVM内存中的实例对象存放包括三部分:  对象头+实例数据+对齐填充(非必须);
> - 实例数据: 类的属性信息
> - 对齐填充: 由于JVM要求对象起始地址必须是8字节的整数倍,所以这个仅是为了字节对齐
> - 对象头:

**对象头的存储长度和结构**
- Java对象头一般占2个机器码.如果对象是数组则会分配3个机器码，多出来的1个机器码记录的是数组长度,(因为JVM可以通过Java对象的元数据信息确定Java对象的大小,但无法从数组的元数据信息来确认数组的大小)(32位虚拟机中,一个机器码等于4字节,64位虚拟机中一个机器码等8字节,就是64bit)
- 对象头包括两部分:Mark Word(标记字段)和Class Pointer(类型指针) 

**Class Pointer(类型指针)**
Class Pointer是对象指向它的类元数据的指针

**Mark Word（标记字段）**
- 存储对象自身运行时数据,包括HashCode,GC分代年龄,锁信息;(它是实现轻量级锁和偏向锁的关键)
- 被设计成一个非固定的数据结构以便在极小的空间内存存储尽量多的数据，它会根据对象的状态复用自己的存储空间

**对象头中Mark Word与线程中Lock Record**
